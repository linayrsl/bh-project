<?xml version="1.0" encoding="utf-8"?><testsuite errors="0" failures="1" name="pytest" skipped="0" tests="9" time="1.139"><testcase classname="tests.handlers.test_auth.TestAuth" file="tests/handlers/test_auth.py" line="6" name="test_generate_verification_code" time="0.002"></testcase><testcase classname="tests.handlers.test_auth.TestAuth" file="tests/handlers/test_auth.py" line="10" name="test_generate_verification_code_not_repetitive" time="0.001"></testcase><testcase classname="tests.handlers.test_create_gedcom.TestCreateGedcom" file="tests/handlers/test_create_gedcom.py" line="20" name="test_create_gedcom_simple" time="0.155"></testcase><testcase classname="tests.handlers.test_family_tree.TestFamilyTree" file="tests/handlers/test_family_tree.py" line="87" name="test_family_tree_bad_birth_date" time="0.026"><system-err>[40422f64-aa5e-4465-9564-21885d45a236] [2020-12-06 19:43:04 +0200] [src.handlers.family_tree] [ERROR] Family tree json validation has failed
Traceback (most recent call last):
  File &quot;/Users/lina/projects/bh-project/src/handlers/family_tree.py&quot;, line 129, in family_tree_post
    validate(family_tree_json, family_tree_json_schema, format_checker=FormatChecker())
  File &quot;/Users/lina/PycharmProjects/She-codes-BH-Project/venv/lib/python3.7/site-packages/jsonschema/validators.py&quot;, line 899, in validate
    raise error
jsonschema.exceptions.ValidationError: &apos;18-12-1983&apos; does not match &apos;^([0-9]{2}/[0-9]{2}/[0-9]{4}|[0-9]{4})$&apos;

Failed validating &apos;pattern&apos; in schema[&apos;properties&apos;][&apos;submitter&apos;][&apos;allOf&apos;][0][&apos;properties&apos;][&apos;birthDate&apos;]:
    {&apos;pattern&apos;: &apos;^([0-9]{2}/[0-9]{2}/[0-9]{4}|[0-9]{4})$&apos;,
     &apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]}

On instance[&apos;submitter&apos;][&apos;birthDate&apos;]:
    &apos;18-12-1983&apos;
</system-err></testcase><testcase classname="tests.handlers.test_family_tree.TestFamilyTree" file="tests/handlers/test_family_tree.py" line="78" name="test_family_tree_bad_first_name" time="0.014"><system-err>[5132ab1b-4b55-4a84-9e9d-cd4c23a7abce] [2020-12-06 19:43:04 +0200] [src.handlers.family_tree] [ERROR] Family tree json validation has failed
Traceback (most recent call last):
  File &quot;/Users/lina/projects/bh-project/src/handlers/family_tree.py&quot;, line 129, in family_tree_post
    validate(family_tree_json, family_tree_json_schema, format_checker=FormatChecker())
  File &quot;/Users/lina/PycharmProjects/She-codes-BH-Project/venv/lib/python3.7/site-packages/jsonschema/validators.py&quot;, line 899, in validate
    raise error
jsonschema.exceptions.ValidationError: 123 is not of type &apos;string&apos;, &apos;null&apos;

Failed validating &apos;type&apos; in schema[&apos;properties&apos;][&apos;submitter&apos;][&apos;allOf&apos;][0][&apos;properties&apos;][&apos;firstName&apos;]:
    {&apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]}

On instance[&apos;submitter&apos;][&apos;firstName&apos;]:
    123
</system-err></testcase><testcase classname="tests.handlers.test_family_tree.TestFamilyTree" file="tests/handlers/test_family_tree.py" line="105" name="test_family_tree_incorrect_gender_choice" time="0.028"><system-err>[5757d4e7-7fb6-420b-9216-00a39b1d219d] [2020-12-06 19:43:04 +0200] [src.handlers.family_tree] [ERROR] Family tree json validation has failed
Traceback (most recent call last):
  File &quot;/Users/lina/projects/bh-project/src/handlers/family_tree.py&quot;, line 129, in family_tree_post
    validate(family_tree_json, family_tree_json_schema, format_checker=FormatChecker())
  File &quot;/Users/lina/PycharmProjects/She-codes-BH-Project/venv/lib/python3.7/site-packages/jsonschema/validators.py&quot;, line 899, in validate
    raise error
jsonschema.exceptions.ValidationError: &apos;animal&apos; is not one of [&apos;male&apos;, &apos;female&apos;, &apos;other&apos;, None]

Failed validating &apos;enum&apos; in schema[&apos;properties&apos;][&apos;submitter&apos;][&apos;allOf&apos;][0][&apos;properties&apos;][&apos;gender&apos;]:
    {&apos;enum&apos;: [&apos;male&apos;, &apos;female&apos;, &apos;other&apos;, None], &apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]}

On instance[&apos;submitter&apos;][&apos;gender&apos;]:
    &apos;animal&apos;
</system-err></testcase><testcase classname="tests.handlers.test_family_tree.TestFamilyTree" file="tests/handlers/test_family_tree.py" line="114" name="test_family_tree_missing_required_field" time="0.027"><system-err>[37b0ace8-9d8e-4b11-91f6-fb68af87e5bd] [2020-12-06 19:43:04 +0200] [src.handlers.family_tree] [ERROR] Family tree json validation has failed
Traceback (most recent call last):
  File &quot;/Users/lina/projects/bh-project/src/handlers/family_tree.py&quot;, line 129, in family_tree_post
    validate(family_tree_json, family_tree_json_schema, format_checker=FormatChecker())
  File &quot;/Users/lina/PycharmProjects/She-codes-BH-Project/venv/lib/python3.7/site-packages/jsonschema/validators.py&quot;, line 899, in validate
    raise error
jsonschema.exceptions.ValidationError: &apos;&apos; is not of type &apos;object&apos;

Failed validating &apos;type&apos; in schema[&apos;properties&apos;][&apos;submitter&apos;][&apos;allOf&apos;][0]:
    {&apos;oneOf&apos;: [{&apos;properties&apos;: {&apos;deathDate&apos;: {&apos;pattern&apos;: &apos;^([0-9]{2}/[0-9]{2}/[0-9]{4}|[0-9]{4})$&apos;,
                                             &apos;type&apos;: &apos;string&apos;},
                               &apos;deathPlace&apos;: {&apos;type&apos;: &apos;string&apos;},
                               &apos;isAlive&apos;: {&apos;enum&apos;: [False]}}},
               {&apos;properties&apos;: {&apos;deathDate&apos;: {&apos;enum&apos;: [None]},
                               &apos;deathPlace&apos;: {&apos;type&apos;: &apos;string&apos;},
                               &apos;isAlive&apos;: {&apos;enum&apos;: [False]}}},
               {&apos;properties&apos;: {&apos;deathDate&apos;: {&apos;pattern&apos;: &apos;^([0-9]{2}/[0-9]{2}/[0-9]{4}|[0-9]{4})$&apos;,
                                             &apos;type&apos;: &apos;string&apos;},
                               &apos;deathPlace&apos;: {&apos;enum&apos;: [None]},
                               &apos;isAlive&apos;: {&apos;enum&apos;: [False]}}},
               {&apos;properties&apos;: {&apos;deathDate&apos;: {&apos;enum&apos;: [None]},
                               &apos;deathPlace&apos;: {&apos;enum&apos;: [None]},
                               &apos;isAlive&apos;: {&apos;enum&apos;: [False, True]}}}],
     &apos;properties&apos;: {&apos;birthDate&apos;: {&apos;pattern&apos;: &apos;^([0-9]{2}/[0-9]{2}/[0-9]{4}|[0-9]{4})$&apos;,
                                  &apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]},
                    &apos;birthPlace&apos;: {&apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]},
                    &apos;father&apos;: {&apos;oneOf&apos;: [{&apos;$ref&apos;: &apos;#/definitions/person&apos;,
                                          &apos;additionalProperties&apos;: False},
                                         {&apos;type&apos;: &apos;null&apos;}]},
                    &apos;firstName&apos;: {&apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]},
                    &apos;gender&apos;: {&apos;enum&apos;: [&apos;male&apos;, &apos;female&apos;, &apos;other&apos;, None],
                               &apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]},
                    &apos;image&apos;: {&apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]},
                    &apos;isAlive&apos;: {&apos;type&apos;: &apos;boolean&apos;},
                    &apos;isSubmitter&apos;: {&apos;type&apos;: &apos;boolean&apos;},
                    &apos;lastName&apos;: {&apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]},
                    &apos;maidenName&apos;: {&apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]},
                    &apos;mother&apos;: {&apos;oneOf&apos;: [{&apos;$ref&apos;: &apos;#/definitions/person&apos;,
                                          &apos;additionalProperties&apos;: False},
                                         {&apos;type&apos;: &apos;null&apos;}]},
                    &apos;siblings&apos;: {&apos;items&apos;: {&apos;$ref&apos;: &apos;#/definitions/person&apos;,
                                           &apos;additionalProperties&apos;: False},
                                 &apos;type&apos;: [&apos;array&apos;, &apos;null&apos;]}},
     &apos;type&apos;: &apos;object&apos;}

On instance[&apos;submitter&apos;]:
    &apos;&apos;
</system-err></testcase><testcase classname="tests.handlers.test_family_tree.TestFamilyTree" file="tests/handlers/test_family_tree.py" line="96" name="test_family_tree_missing_value" time="0.014"><system-err>[dac0169b-49a8-4294-8032-500ae3ea8580] [2020-12-06 19:43:04 +0200] [src.handlers.family_tree] [ERROR] Family tree json validation has failed
Traceback (most recent call last):
  File &quot;/Users/lina/projects/bh-project/src/handlers/family_tree.py&quot;, line 129, in family_tree_post
    validate(family_tree_json, family_tree_json_schema, format_checker=FormatChecker())
  File &quot;/Users/lina/PycharmProjects/She-codes-BH-Project/venv/lib/python3.7/site-packages/jsonschema/validators.py&quot;, line 899, in validate
    raise error
jsonschema.exceptions.ValidationError: &apos;&apos; is not one of [&apos;male&apos;, &apos;female&apos;, &apos;other&apos;, None]

Failed validating &apos;enum&apos; in schema[&apos;properties&apos;][&apos;submitter&apos;][&apos;allOf&apos;][0][&apos;properties&apos;][&apos;gender&apos;]:
    {&apos;enum&apos;: [&apos;male&apos;, &apos;female&apos;, &apos;other&apos;, None], &apos;type&apos;: [&apos;string&apos;, &apos;null&apos;]}

On instance[&apos;submitter&apos;][&apos;gender&apos;]:
    &apos;&apos;
</system-err></testcase><testcase classname="tests.handlers.test_family_tree.TestFamilyTree" file="tests/handlers/test_family_tree.py" line="71" name="test_family_tree_valid" time="0.029"><failure message="AssertionError: 200 != 500">self = &lt;test_family_tree.TestFamilyTree testMethod=test_family_tree_valid&gt;

    def test_family_tree_valid(self):
        family_tree = copy.deepcopy(test_family_tree)
        with application.test_client() as client:
            response: Response = client.post(&quot;/api/family-tree/&quot;, json=family_tree)
    
&gt;           self.assertEqual(200, response.status_code)
E           AssertionError: 200 != 500

tests/handlers/test_family_tree.py:77: AssertionError</failure><system-err>[2b8f2529-35fd-461e-b1ef-6bc2a807b562] [2020-12-06 19:43:04 +0200] [src.handlers.family_tree] [ERROR] Failed to generate gedcom from family tree json
Traceback (most recent call last):
  File &quot;/Users/lina/projects/bh-project/src/handlers/family_tree.py&quot;, line 136, in family_tree_post
    gedcom_string, image_dict, _ = handler(family_tree_json[&quot;familyTree&quot;], family_tree_json[&quot;language&quot;])
KeyError: &apos;familyTree&apos;
</system-err></testcase></testsuite>